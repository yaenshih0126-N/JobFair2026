<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DHL é–ƒé›»åˆ†æ€å“¡ - å°ˆæ¥­æ‰“æ«ƒç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #FFCC00; /* DHL Yellow */
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            touch-action: none;
            height: 100vh;
            width: 100vw;
        }
        .dhl-red { color: #D40000; }
        .bg-dhl-red { background-color: #D40000; }
        
        #game-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* é ‚éƒ¨è³‡è¨Šå€ - å„ªåŒ–é«˜åº¦ä»¥é¨°å‡ºç©ºé–“ */
        header {
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            padding-top: 15px;
        }

        /* å‚³é€å¸¶/å·¥ä½œå€ - ä½”ç”¨ä¸­é–“å¤§éƒ¨ç©ºé–“ä¸¦è‡ªå‹•ä¼¸ç¸® */
        #work-area {
            flex-grow: 1;
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 40;
        }

        /* ç¸®å°å¾Œçš„ DHL ç´™ç®±ï¼Œé©é…æ‰‹æ©Ÿæ¯”ä¾‹ */
        .package {
            width: 220px; 
            min-height: 160px; 
            background: #FFCC00; 
            border: 3px solid #333; 
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.1); 
            z-index: 100;
            padding: 10px;
            text-align: center;
            pointer-events: auto;
        }

        .package::before {
            content: '';
            position: absolute;
            bottom: 15px;
            left: 0;
            width: 100%;
            height: 8px;
            background: #D40000; 
            border-top: 2px solid #333;
            border-bottom: 2px solid #333;
        }

        .label-area {
            background: white;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 10px;
            width: 90%;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            z-index: 10;
        }

        /* åº•éƒ¨æ«ƒä½å€ - å›ºå®šé«˜åº¦ç¢ºä¿æ‰‹æ©Ÿä¸Šä¸æœƒæ¶ˆå¤± */
        footer {
            height: 180px; 
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 0 15px 15px 15px;
            z-index: 30;
        }

        .pallet-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 45%;
        }

        .pallet-container {
            width: 100%;
            height: 120px;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid #D40000;
            border-top: none;
            border-radius: 0 0 10px 10px;
            display: flex;
            flex-direction: column-reverse; 
            align-items: center;
            padding-bottom: 4px;
            overflow: hidden;
        }

        .stacked-box {
            width: 90%;
            height: 18px;
            background: #FFCC00; 
            border: 1px solid #333;
            margin-bottom: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 900;
            color: #D40000;
            border-radius: 2px;
            animation: dropIn 0.3s ease-out;
            position: relative;
        }

        .pallet-label {
            width: 100%;
            text-align: center;
            font-weight: 900;
            color: #D40000;
            font-size: 0.75rem;
            background: white;
            padding: 4px;
            border: 2px solid #D40000;
            border-radius: 8px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #timer-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 6px;
            background: #D40000;
            width: 100%;
            z-index: 200;
        }

        #explanation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 500;
        }

        .hidden { display: none !important; }

        @keyframes dropIn {
            0% { transform: translateY(-40px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10-30-50-70-90% { transform: translateX(-5px); }
            20-40-60-80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <div id="timer-bar"></div>

    <div id="game-container">
        <!-- é–‹å§‹ç•«é¢ -->
        <div id="start-screen" class="w-full h-full flex flex-col items-center justify-center p-6 z-[200] absolute bg-[#FFCC00]">
            <h1 class="text-4xl font-black dhl-red mb-1 italic text-center">DHL EXPRESS</h1>
            <h2 class="text-xl font-bold mb-6 text-gray-800">å°ˆæ¥­æ‰“æ«ƒæŒ‘æˆ°è³½</h2>
            <div class="bg-white p-6 rounded-3xl shadow-2xl max-w-xs w-full text-center border-4 border-black">
                <div class="w-16 h-14 bg-[#FFCC00] mx-auto mb-4 border-2 border-black relative flex items-center justify-center rounded">
                    <span class="font-black text-red-600 italic text-sm">DHL</span>
                </div>
                <p class="text-sm text-gray-700 mb-6 font-bold">æº–ç¢ºç©è¼‰æ˜¯ç‰©æµå°–å…µçš„åŸºæœ¬åŠŸï¼</p>
                <button id="start-btn" class="w-full bg-dhl-red text-white py-4 rounded-xl text-xl font-bold shadow-[0_4px_0_#990000] active:translate-y-1 active:shadow-none">
                    é ˜å–ä»»å‹™
                </button>
            </div>
        </div>

        <!-- éŠæˆ²ç•«é¢ -->
        <div id="game-play" class="hidden flex flex-col h-full w-full">
            <header>
                <div class="text-gray-600 font-bold text-[10px] uppercase tracking-widest">Efficiency</div>
                <div id="score" class="text-4xl font-black dhl-red">0</div>
            </header>

            <div id="work-area">
                <!-- ç´™ç®±ç”Ÿæˆå€ -->
            </div>

            <footer>
                <div class="pallet-wrap">
                    <div id="left-label" class="pallet-label">é¸é … A</div>
                    <div id="left-pallet" class="pallet-container"></div>
                </div>
                <div class="pallet-wrap">
                    <div id="right-label" class="pallet-label">é¸é … B</div>
                    <div id="right-pallet" class="pallet-container"></div>
                </div>
            </footer>
        </div>

        <!-- ç­”æ¡ˆè§£æè¦–çª— -->
        <div id="explanation-overlay" class="hidden">
            <div class="bg-white w-10/12 max-w-sm rounded-2xl border-4 border-black p-5 shadow-2xl">
                <div id="result-indicator" class="text-xl font-black mb-2 italic">CORRECT!</div>
                <p id="explanation-text" class="text-gray-700 text-sm font-medium leading-snug mb-5">
                    è§£æå…§å®¹...
                </p>
                <button id="next-task-btn" class="w-full bg-dhl-red text-white py-3 rounded-lg font-black text-md">
                    ä¸‹ä¸€å€‹ä»»å‹™
                </button>
            </div>
        </div>

        <!-- çµæœç•«é¢ -->
        <div id="result-screen" class="hidden w-full h-full flex flex-col items-center justify-center p-6 z-[300] absolute bg-[#FFCC00]">
            <h2 class="text-3xl font-black dhl-red mb-4 italic">ä»»å‹™å®Œæˆï¼</h2>
            <div class="bg-white p-6 rounded-3xl shadow-2xl max-w-xs w-full text-center border-4 border-black">
                <p class="text-sm text-gray-600 font-bold">ç©è¼‰æ•ˆç‡ï¼š</p>
                <div id="final-score" class="text-6xl font-black mb-2 dhl-red">0</div>
                <p id="rank-text" class="text-lg font-bold text-yellow-600 mb-6"></p>
                
                <button onclick="window.location.reload()" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold mb-3">é‡æ–°æŒ‘æˆ°</button>
                <button id="join-team-btn" class="w-full bg-dhl-red text-white py-3 rounded-xl font-bold">åŠ å…¥å“è¶Šåœ˜éšŠ</button>
            </div>
        </div>
    </div>

    <script>
        // æ ¸å¿ƒé‚è¼¯ä¿æŒä¸€è‡´ï¼Œå„ªåŒ–äº†æ‰‹æ©Ÿç«¯äº¤äº’éˆæ•åº¦
        const questions = [
            { q: "DHL æ˜¯åœ¨å“ªè£¡æˆç«‹çš„ï¼Ÿ", left: "èˆŠé‡‘å±±", right: "è¾›è¾›é‚£æ", correct: "left", desc: "DHLæ–¼1969å¹´åœ¨ç¾åœ‹èˆŠé‡‘å±±æˆç«‹ã€‚" },
            { q: "DHL ä¸»è¦çš„æ¥­å‹™æ˜¯ä»€éº¼ï¼Ÿ", left: "åœ‹éš›å¿«é/ä¾›æ‡‰éˆ", right: "é¤é£²å¤–é€", correct: "left", desc: "DHLæ˜¯ä¸–ç•Œæœ€å¤§çš„ç‰©æµé›†åœ˜ã€‚" },
            { q: "DHL åå­—ä¾†æºï¼Ÿ", left: "å‰µå§‹äººå§“æ°", right: "å¿«éç¸®å¯«", correct: "left", desc: "ä¾†è‡ª Dalsey, Hillblom, Lynn ä¸‰ä½å‰µå§‹äººã€‚" },
            { q: "é›†åœ˜ç’°ä¿ç›®æ¨™ï¼Ÿ", left: "è¾¦å…¬å®¤ç¶ åŒ–", right: "2050 æ·¨é›¶æ’æ”¾", correct: "right", desc: "ç›®æ¨™åœ¨2050å¹´é”æˆå…¨é›†åœ˜æ·¨é›¶æ’æ”¾ã€‚" },
            { q: "DHL å“ç‰Œè‰²ï¼Ÿ", left: "ç¶ èˆ‡é»‘", right: "é»ƒèˆ‡ç´…", correct: "right", desc: "é»ƒåº•ç´…å­—æ˜¯ DHL æœ€ç¶“å…¸çš„è­˜åˆ¥è‰²ã€‚" }
        ];

        let score = 0;
        let timeLeft = 30;
        let gameActive = false;
        let timerPaused = false;
        let currentPackage = null;
        let startX = 0;
        let questionIndex = 0;

        const startBtn = document.getElementById('start-btn');
        const nextTaskBtn = document.getElementById('next-task-btn');
        const workArea = document.getElementById('work-area');
        const scoreDisplay = document.getElementById('score');
        const leftPallet = document.getElementById('left-pallet');
        const rightPallet = document.getElementById('right-pallet');
        const expOverlay = document.getElementById('explanation-overlay');
        const joinBtn = document.getElementById('join-team-btn');

        startBtn.addEventListener('click', startGame);
        nextTaskBtn.addEventListener('click', hideExplanation);

        joinBtn.addEventListener('click', function() {
            const url = "https://careers.dhl.com/global/en";
            const newWindow = window.open(url, '_blank');
            if (!newWindow || newWindow.closed) window.location.href = url;
        });

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-play').classList.remove('hidden');
            gameActive = true;
            spawnQuestion();
            startTimer();
        }

        function startTimer() {
            const timerBar = document.getElementById('timer-bar');
            const interval = setInterval(() => {
                if (!gameActive) { clearInterval(interval); return; }
                if (!timerPaused) {
                    timeLeft -= 0.1;
                    timerBar.style.width = (timeLeft / 30 * 100) + '%';
                    if (timeLeft <= 0) endGame();
                }
            }, 100);
        }

        function spawnQuestion() {
            if (!gameActive || questionIndex >= questions.length) return;
            const data = questions[questionIndex];
            
            document.getElementById('left-label').innerText = data.left;
            document.getElementById('right-label').innerText = data.right;

            const pkg = document.createElement('div');
            pkg.className = 'package';
            pkg.innerHTML = `
                <div class="label-area">
                    <div class="text-base font-black text-gray-800">${data.q}</div>
                </div>
            `;
            workArea.appendChild(pkg);
            currentPackage = pkg;

            const handleStart = (x) => { if(!timerPaused) startX = x; };
            const handleMove = (x) => {
                if (!currentPackage || timerPaused) return;
                const diff = x - startX;
                currentPackage.style.transform = `translateX(${diff}px) rotate(${diff/15}deg)`;
            };
            const handleEnd = (x) => {
                if (!currentPackage || timerPaused) return;
                const diff = x - startX;
                // æ‰‹æ©Ÿç«¯æ„Ÿæ‡‰è·é›¢èª¿å„ª
                if (diff < -60) validate('left');
                else if (diff > 60) validate('right');
                else {
                    currentPackage.style.transition = 'transform 0.3s ease';
                    currentPackage.style.transform = 'translateX(0) rotate(0)';
                    setTimeout(() => currentPackage.style.transition = '', 300);
                }
            };

            pkg.addEventListener('touchstart', (e) => handleStart(e.touches[0].clientX), {passive: true});
            pkg.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e.touches[0].clientX); }, {passive: false});
            pkg.addEventListener('touchend', (e) => handleEnd(e.changedTouches[0].clientX));

            pkg.addEventListener('mousedown', (e) => {
                handleStart(e.clientX);
                const onMM = (me) => handleMove(me.clientX);
                const onMU = (ue) => {
                    handleEnd(ue.clientX);
                    window.removeEventListener('mousemove', onMM);
                    window.removeEventListener('mouseup', onMU);
                };
                window.addEventListener('mousemove', onMM);
                window.addEventListener('mouseup', onMU);
            });
        }

        function validate(choice) {
            const data = questions[questionIndex];
            const isCorrect = choice === data.correct;
            const targetPallet = choice === 'left' ? leftPallet : rightPallet;
            timerPaused = true; 

            if (isCorrect) {
                score += 20;
                currentPackage.style.transition = 'all 0.4s ease-in';
                currentPackage.style.transform = `translate(${choice === 'left' ? -150 : 150}px, 300px) scale(0.1)`;
                currentPackage.style.opacity = '0';
                setTimeout(() => addStackedBox(targetPallet), 300);
            } else {
                score = Math.max(0, score - 10);
                currentPackage.style.transition = 'all 0.5s ease-out';
                currentPackage.style.transform = `translateY(500px) rotate(90deg)`;
                currentPackage.style.opacity = '0';
                document.body.classList.add('shake');
                setTimeout(() => document.body.classList.remove('shake'), 400);
            }
            scoreDisplay.innerText = score;
            showExplanation(isCorrect, data.desc);
        }

        function showExplanation(isCorrect, text) {
            const ind = document.getElementById('result-indicator');
            ind.innerText = isCorrect ? "ç­”å°äº†ï¼" : "ç­”éŒ¯å›‰ï¼";
            ind.className = isCorrect ? "text-xl font-black mb-2 text-green-600" : "text-xl font-black mb-2 text-red-600";
            document.getElementById('explanation-text').innerText = text;
            setTimeout(() => expOverlay.classList.remove('hidden'), 500);
        }

        function hideExplanation() {
            expOverlay.classList.add('hidden');
            if (currentPackage) currentPackage.remove();
            questionIndex++;
            timerPaused = false;
            if (questionIndex >= questions.length) endGame();
            else spawnQuestion();
        }

        function addStackedBox(pallet) {
            const box = document.createElement('div');
            box.className = 'stacked-box';
            box.innerText = `OK`;
            pallet.appendChild(box);
        }

        function endGame() {
            gameActive = false;
            document.getElementById('game-play').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            let rank = score >= 100 ? "ğŸ† ç‰¹ç´šæ‰“æ«ƒå¤§å¸«" : (score >= 60 ? "ğŸšš å°ˆæ¥­ç‰©æµå£«" : "ğŸ“¦ å¯¦ç¿’æ“ä½œå“¡");
            document.getElementById('rank-text').innerText = rank;
        }
    </script>
</body>
</html>
